schema: '2.0'
stages:
  convert_labeled_data:
    cmd: python src/convert_labeled_data.py
    deps:
    - path: data/labeled_data.csv
      hash: md5
      md5: 9d4fa365f1fa246b30b51c901c9778f3
      size: 154908
    - path: src/convert_labeled_data.py
      hash: md5
      md5: 6aaca710b02c324b3e6794c0ea060647
      size: 1593
    outs:
    - path: data/annotation_per_row_data.csv
      hash: md5
      md5: 33b1fe5a9f1b2dad8a4fe4d4554ab499
      size: 79069
  fetch_labeled_data:
    cmd: ./src/fetch_data.sh
    deps:
    - path: src/fetch_data.sh
      hash: md5
      md5: b031d3969b674c3d84a4d78d08ca18b5
      size: 239
      isexec: true
    outs:
    - path: data/labeled_data.csv
      hash: md5
      md5: 9d4fa365f1fa246b30b51c901c9778f3
      size: 154908
  download_audio:
    cmd: python ./src/download_audio.py --target-dir data/audio --annotations-file
      data/annotation_per_row_data.csv
    deps:
    - path: data/annotation_per_row_data.csv
      hash: md5
      md5: 33b1fe5a9f1b2dad8a4fe4d4554ab499
      size: 79069
    - path: src/download_audio.py
      hash: md5
      md5: e78334358fef181c6b650759ac1149b8
      size: 1276
    outs:
    - path: data/audio
      hash: md5
      md5: ba9013cf9487e451a5ec2b1bcf5e614d.dir
      size: 305561640
      nfiles: 654
  extract_data_quality:
    cmd: python ./src/extract_data_quality.py
    deps:
    - path: data/annotation_per_row_data.csv
      hash: md5
      md5: 33b1fe5a9f1b2dad8a4fe4d4554ab499
      size: 79069
    - path: src/extract_data_quality.py
      hash: md5
      md5: 325375c99c3c42b7d3af9721e240468b
      size: 650
    outs:
    - path: data/data_quality/sample_based_quality.json
      hash: md5
      md5: fff0bd27deab82273cf08fc7e32a250a
      size: 118
    - path: data/data_quality/samples_per_label.csv
      hash: md5
      md5: 23b1b9ff167c764d05c87fe6a588db52
      size: 75
  cut_in_chunks:
    cmd: python src/cut_in_chunks.py
    deps:
    - path: data/annotation_per_row_data.csv
      hash: md5
      md5: 33b1fe5a9f1b2dad8a4fe4d4554ab499
      size: 79069
    - path: src/cut_in_chunks.py
      hash: md5
      md5: 6e56d9cfd889572c8644e5f056935ef3
      size: 943
    params:
      params.yaml:
        chunk_overlap: 30
        chunk_size: 100
    outs:
    - path: data/chunked_data.csv
      hash: md5
      md5: 76058659c6a3e3e03090ee4bcca06ce5
      size: 17928335
  balance_data_set:
    cmd: python src/balance_dataset.py
    deps:
    - path: data/chunked_data.csv
      hash: md5
      md5: 76058659c6a3e3e03090ee4bcca06ce5
      size: 17928335
    - path: src/balance_dataset.py
      hash: md5
      md5: c7d395af55b04435b3ea224067c42964
      size: 1170
    outs:
    - path: data/balanced_data.csv
      hash: md5
      md5: b028c4f8c46517c9b2ea69e39743e38f
      size: 483106
  extract_features:
    cmd: python src/extract_mfcc_features.py
    deps:
    - path: data/audio
      hash: md5
      md5: ba9013cf9487e451a5ec2b1bcf5e614d.dir
      size: 305561640
      nfiles: 654
    - path: data/balanced_data.csv
      hash: md5
      md5: b028c4f8c46517c9b2ea69e39743e38f
      size: 483106
    - path: src/extract_mfcc_features.py
      hash: md5
      md5: a0dc7457e0cb0c818ded8ddbaa03fe54
      size: 1812
    params:
      params.yaml:
        feature_extraction:
          n_mfcc: 13
          n_fft: 512
    outs:
    - path: ./data/mffc_data.h5
      hash: md5
      md5: f5a48d6dbe877c2a4c356035904d483e
      size: 3222072
